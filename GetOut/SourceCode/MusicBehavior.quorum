use Libraries.Interface.Behaviors.Behavior
use Libraries.Interface.Events.BehaviorEvent
use Libraries.Game.GameStateManager
use Libraries.Sound.Audio

class MusicBehavior is Behavior
boolean finished = false
Audio music
GameStateManager gsm
Main game = undefined

    action Run(BehaviorEvent event) 
        game = cast(Main, gsm:GetGame())
        Room room = cast(Room, event:GetItem())
        text path = room:GetMusicPath()
music:LoadToStream(path)
music:EnableLooping()
music:Play()
    end

action Update(number seconds)
music:SetVolume(1.0-game:GetHeartVolume())
music:Stream()
end

action IsFinished returns boolean
return finished
end

action SetFinished(boolean f)
finished = f
end
end
